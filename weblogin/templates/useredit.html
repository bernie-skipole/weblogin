
## useredit.html
<%inherit file="base_edit.html"/>

<%block name="title">
<title>User Edit</title>
</%block>

<div x-data="{ open: false }" style="margin-left:auto;width:80%;max-width:400px;margin-right:auto;margin-top:15vh">

  <div>
    <button x-on:click="open=!open" x-text="open ? 'Close' : 'Change your password'" class="w3-button w3-black w3-ripple w3-round" style="width:100%"></button>
  </div>

  <div x-show="open" class="w3-container w3-card" style="margin-top:5vh;">
    <p>Change password for user: ${user | h}</p>
    <form hx-post="/edit/changepwd" hx-target="#result" hx-swap="outerHTML" hx-on::after-request="if(event.detail.successful) this.reset()">
      <p><label for="oldpassword">Old Password:</label>
        <input class="w3-input" type="password" id="oldpassword" name="oldpassword" required /></p>
      <p><label for="password1">New Password:</label>
        <input class="w3-input" type="password" id="password1" name="password1" required /></p>
      <p><label for="password2">New Password again:</label>
        <input class="w3-input" type="password" id="password2" name="password2" required /></p>
      <p class="w3-center">
        <button class="w3-button w3-black w3-ripple w3-round" type="submit">Submit</button></p>
    </form>
    <span x-html="open ? '&lt;p id=&quot;result&quot;&gt;&lt;/p&gt;' : '&lt;p&gt;&lt;/p&gt;'"></span>
  </div>

</div>

<div x-data="{ open: false }" style="margin-left:auto;width:80%;max-width:400px;margin-right:auto;margin-top:5vh;">

  <div>
    <button x-on:click="open=!open" x-text="open ? 'Do not delete the account' : 'Delete your account'" class="w3-button w3-black w3-ripple w3-round" style="width:100%"></button>
  </div>

  <div x-show="open" class="w3-center" style="margin-top:5vh;">
    <p>This deletes your ${user | h} account, and logs you off permanently. Are you sure you want to do this?</p>
    <p><button hx-post="/edit/deluser" hx-target="#delresult" class="w3-button w3-black w3-ripple w3-round">Yes, Please delete my account</button></p>
    <p id="delresult" class="w3-red" x-text="open ? '' : ''"></p>
  </div>

</div>
